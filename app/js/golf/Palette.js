/**
 * Palette.js
 * @author @shawngettler
 *
 * CLass containing the JNSE palette.
 */



/**
 * Class containing course palette.
 */
export default class Palette {

    // default
    static DEFAULT_PALETTE = new Uint8Array([
        0, 0, 0,    // interface
        46, 0, 0,
        51, 5, 5,
        57, 12, 12,
        63, 21, 21,
        0, 0, 46,
        1, 5, 51,
        4, 13, 57,
        8, 21, 63,
        0, 44, 14,
        0, 63, 21,
        63, 63, 0,
        4, 4, 4,
        23, 23, 23,
        52, 52, 52,
        63, 63, 63,
        19, 19, 20, // reserved
        21, 21, 21,
        16, 16, 18,
        11, 11, 14,
        20, 20, 20,
        52, 52, 36,
        36, 28, 24,
        32, 24, 24,
        25, 25, 18,
        36, 36, 28,
        40, 36, 20,
        44, 40, 36,
        40, 40, 40,
        36, 36, 36,
        52, 52, 48,
        56, 56, 44,
        13, 9, 5,   // objects
        14, 10, 5,
        16, 11, 6,
        17, 12, 7,
        19, 13, 7,
        20, 14, 8,
        22, 16, 9,
        24, 17, 10,
        15, 13, 4,
        18, 16, 5,
        22, 19, 6,
        26, 23, 7,
        30, 26, 9,
        34, 30, 10,
        38, 33, 11,
        42, 37, 13,
        14, 15, 5,
        17, 18, 6,
        21, 22, 8,
        24, 26, 9,
        28, 30, 10,
        32, 34, 12,
        35, 38, 13,
        39, 42, 15,
        15, 15, 7,
        18, 18, 9,
        22, 22, 11,
        26, 26, 13,
        30, 30, 15,
        34, 34, 18,
        38, 38, 20,
        42, 42, 23,
        10, 16, 5,
        12, 19, 6,
        15, 23, 8,
        18, 27, 10,
        21, 30, 12,
        24, 34, 13,
        27, 38, 16,
        30, 42, 18,
        12, 15, 7,
        15, 18, 9,
        18, 22, 11,
        21, 26, 12,
        25, 30, 15,
        28, 34, 17,
        31, 38, 19,
        35, 42, 21,
        0, 0, 0,
        8, 8, 0,
        4, 10, 8,
        8, 8, 4,
        6, 12, 2,
        10, 12, 2,
        8, 12, 6,
        14, 12, 2,
        6, 14, 10,
        12, 12, 6,
        8, 16, 2,
        10, 14, 10,
        12, 16, 0,
        10, 16, 6,
        14, 16, 6,
        10, 16, 14,
        12, 18, 10, // background
        16, 16, 10,
        12, 20, 6,
        14, 18, 14,
        16, 20, 8,
        12, 22, 10,
        16, 22, 12,
        14, 22, 16,
        18, 24, 8,
        20, 22, 12,
        18, 24, 16,
        18, 26, 12,
        14, 26, 22,
        18, 24, 20,
        22, 24, 16,
        22, 26, 12,
        20, 28, 18,
        18, 28, 22,
        20, 30, 14,
        24, 28, 16,
        18, 30, 30,
        24, 30, 20,
        22, 30, 24,
        24, 33, 16,
        26, 33, 24,
        26, 35, 28,
        28, 37, 22,
        24, 39, 35,
        33, 41, 37,
        30, 45, 41,
        41, 49, 43,
        37, 51, 49,
        51, 60, 63,
        50, 59, 63,
        49, 58, 63,
        48, 58, 63,
        47, 57, 63,
        46, 56, 63,
        45, 55, 63,
        45, 55, 63,
        10, 20, 0,  // grass
        10, 20, 0,
        10, 20, 0,
        10, 21, 0,
        10, 21, 0,
        10, 22, 0,
        10, 22, 0,
        10, 22, 0,
        10, 23, 1,
        10, 23, 1,
        10, 24, 1,
        10, 24, 1,
        10, 24, 1,
        10, 25, 1,
        10, 25, 1,
        10, 26, 2,
        10, 26, 2,
        10, 26, 2,
        10, 27, 2,
        10, 27, 3,
        10, 28, 3,
        10, 28, 3,
        10, 28, 3,
        10, 29, 4,
        10, 29, 4,
        10, 30, 4,
        10, 30, 5,
        10, 30, 5,
        10, 31, 5,
        10, 31, 5,
        10, 32, 6,
        10, 32, 6,
        10, 32, 6,
        10, 33, 7,
        10, 33, 7,
        10, 34, 8,
        10, 34, 8,
        10, 34, 8,
        10, 35, 9,
        10, 35, 9,
        10, 36, 9,
        10, 36, 10,
        10, 36, 10,
        11, 37, 11,
        11, 37, 11,
        11, 38, 12,
        12, 38, 13,
        12, 38, 14,
        13, 39, 14,
        13, 39, 15,
        14, 40, 16,
        14, 40, 17,
        14, 40, 17,
        15, 41, 18,
        15, 41, 19,
        16, 42, 20,
        36, 34, 27, // sand
        36, 34, 28,
        37, 35, 29,
        38, 36, 29,
        39, 37, 31,
        40, 38, 31,
        41, 39, 33,
        42, 40, 34,
        43, 41, 35,
        43, 42, 36,
        44, 43, 37,
        45, 44, 38,
        46, 45, 39,
        47, 45, 40,
        48, 46, 41,
        49, 47, 42,
        50, 48, 43,
        50, 49, 45,
        51, 50, 46,
        52, 51, 47,
        53, 52, 48,
        54, 53, 49,
        55, 54, 51,
        56, 55, 52,
        57, 56, 53,
        57, 57, 54,
        58, 58, 56,
        59, 59, 57,
        60, 60, 58,
        61, 61, 60,
        62, 62, 61,
        63, 63, 63,
        0, 7, 18,   // water
        0, 7, 21,
        0, 8, 24,
        0, 8, 25,
        0, 9, 27,
        0, 9, 26,
        0, 10, 30,
        0, 10, 31,
        0, 11, 33,
        0, 11, 33,
        0, 12, 36,
        0, 12, 37,
        0, 12, 37,
        0, 13, 41,
        0, 13, 42,
        0, 14, 44,
        16, 16, 16, // cart path
        17, 17, 17,
        19, 19, 19,
        21, 21, 21,
        23, 23, 23,
        24, 24, 24,
        26, 26, 26,
        28, 28, 28,
        29, 29, 29,
        31, 31, 31,
        33, 33, 33,
        35, 35, 35,
        36, 36, 36,
        38, 38, 38,
        40, 40, 40,
        42, 42, 42
    ]);


    // terrain colors in designer
    static TERRAIN_BASE = [ 152, 176, 216, 232, 160, 168, 176, 248 ];



    /**
     * Create new palette from default.
     */
    constructor() {
        this.values = Palette.DEFAULT_PALETTE;
    }



    /**
     * Calculate RGBA values from 18-bit palette.
     *
     * @param index palette index
     *
     * @return array with 4 values 0-255
     */
    getRGBA(index) {
        let rgba = [];
        for(let i = 0; i < 3; i++) {
            rgba[i] = this.values[index*3 + i]*4;
        }
        rgba[3] = 255;
        return rgba;
    }



    /**
     * Translate plot codes to palette index for terrain types.
     *
     * @param plotCode plot definition code 0-7
     *
     * @return palette index for base color
     */
    static getTerrainIndex(plotCode) {
        return Palette.TERRAIN_BASE[plotCode];
    }

}
